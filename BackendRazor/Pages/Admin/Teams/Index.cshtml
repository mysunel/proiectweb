@page
@model BackendRazor.Pages.Admin.Teams.IndexModel
@{
    ViewData["Title"] = "Admin - Teams";
}
@if (TempData["ErrorMessage"] != null)
{
    <script>
        alert("@TempData["ErrorMessage"]");
    </script>
}

<div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-semibold mb-4">Manage Teams</h2>

    <a asp-page="Create"
       class="inline-block px-4 py-2 bg-green-600 text-white no-underline! rounded-md hover:bg-green-700 transition">
        Adauga echipa
    </a>
</div>


<form method="get" class="mb-4">
    <div class="flex gap-2">
        <input type="text" name="SearchTerm" value="@Model.SearchTerm"
               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"
               placeholder="Nume echipa...">

        <button type="submit"
                class="px-4 py-2 bg-blue-600 text-white rounded-md! hover:bg-blue-700 transition">
            Cauta
        </button>
    </div>
</form>

<table class="min-w-full divide-y divide-gray-300 shadow-sm rounded-lg overflow-hidden">
    <thead class="bg-gray-100">
        <tr>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Nume</th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Oras</th>
            <th class="px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">Actiuni</th>
        </tr>
    </thead>

    <tbody class="divide-y divide-gray-200 bg-white">
    @foreach (var team in Model.Teams)
    {
        <tr class="hover:bg-gray-50 transition">
            <td class="px-4 py-3 font-medium text-gray-800">@team.Name</td>
            <td class="px-4 py-3 text-gray-700">@team.City</td>
            <td class="px-4 py-3 text-center space-x-2">

                <a asp-page="Edit" asp-route-id="@team.Idteam"
                   class="inline-block px-3 py-1.5 text-sm no-underline! text-blue-600 border border-blue-600 rounded-md hover:bg-blue-600 hover:text-white! transition">
                    Editeaza
                </a>

                <form method="post" asp-page-handler="Delete" asp-route-id="@team.Idteam"
                      class="inline-block"
                      onsubmit="return confirm('Esti pe cale sa stergi echipa: @team.Name')">
                    <button type="submit"
                            class="px-3 py-1.5 text-sm! text-red-600 border border-red-600 rounded-md! hover:bg-red-600 hover:text-white transition">
                        Sterge
                    </button>
                </form>

            </td>
        </tr>
    }
    </tbody>
</table>

<!-- PAGINARE -->
<nav class="mt-6">
    <ul class="flex gap-2 justify-center">

        @if (Model.PageNumber > 1)
        {
            <li>
                <a class="px-3 py-1 border rounded-md no-underline! bg-white hover:bg-blue-100! transition"
                   asp-route-pageNumber="@(Model.PageNumber - 1)">
                    « Inapoi
                </a>
            </li>
        }

        @for (int i = 1; i <= Model.TotalPages; i++)
        {
            <li>
                <a class="px-3 py-1 border rounded-md transition no-underline!
                          @(i == Model.PageNumber ? "bg-blue-600 text-white" : "bg-white hover:bg-blue-100!")"
                   asp-route-pageNumber="@i">
                    @i
                </a>
            </li>
        }

        @if (Model.PageNumber < Model.TotalPages)
        {
            <li>
                <a class="px-3 py-1 border no-underline! rounded-md bg-white hover:bg-blue-100! transition"
                   asp-route-pageNumber="@(Model.PageNumber + 1)">
                    Inainte »
                </a>
            </li>
        }

    </ul>
</nav>